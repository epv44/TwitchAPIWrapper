<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TwitchAPIWrapper  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="TwitchAPIWrapper  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">TwitchAPIWrapper Docs</a> (96% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">TwitchAPIWrapper Reference</a>
        <img id="carat" src="img/carat.png" />
        TwitchAPIWrapper  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/EmotePresenter.html">EmotePresenter</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/TwitchAuthorizationManager.html">TwitchAuthorizationManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/UserPresenter.html">UserPresenter</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/AuthorizationError.html">AuthorizationError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/NetworkJSONServiceError.html">NetworkJSONServiceError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ParsingError.html">ParsingError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/PresentationError.html">PresentationError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TwitchResource.html">TwitchResource</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/JSONResource.html">JSONResource</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P16TwitchAPIWrapper12ResourceType">ResourceType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/TwitchAPIDataSource.html">TwitchAPIDataSource</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Credentials.html">Credentials</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Emote.html">Emote</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V16TwitchAPIWrapper11Endorsement">Endorsement</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs.html#/s:V16TwitchAPIWrapper4Post">Post</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/User.html">User</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:16TwitchAPIWrapper13JSONArrayType">JSONArrayType</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:16TwitchAPIWrapper18JSONDictionaryType">JSONDictionaryType</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#twitch-api-wrapper' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='twitch-api-wrapper'>Twitch API Wrapper</h1>

<p><a href="https://travis-ci.org/epv44/TwitchAPIWrapper"><img src="https://api.travis-ci.org/epv44/TwitchAPIWrapper.svg" alt="CI Status"></a>
<a href="http://cocoapods.org/pods/TwitchAPIWrapper"><img src="https://img.shields.io/cocoapods/v/TwitchAPIWrapper.svg?style=flat" alt="Version"></a>
<a href="http://cocoapods.org/pods/TwitchAPIWrapper"><img src="https://img.shields.io/cocoapods/l/TwitchAPIWrapper.svg?style=flat" alt="License"></a>
<a href="http://cocoapods.org/pods/TwitchAPIWrapper"><img src="https://img.shields.io/cocoapods/p/TwitchAPIWrapper.svg?style=flat" alt="Platform"></a>
<a href="https://codecov.io/gh/epv44/TwitchAPIWrapper"><img src="https://codecov.io/gh/epv44/TwitchAPIWrapper/branch/master/graph/badge.svg" alt="codecov"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage compatible"></a></p>

<p>## About
The Twitch API Wrapper is an HTTP Client for the Twitch API that includes Object mappings to the different Twitch endpoints that can be easily displayed utilizing the provided DataSources.  The library also contains an OAuth Client allowing access to Twitch&rsquo;s secure endpoints as well as OAuth for your application.</p>
<a href='#current-progress' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='current-progress'>Current Progress</h2>

<ul>
<li>Created Presenter Object for the User Twitch Endpoint.</li>
<li>Created Presenter Object for the Emote Twitch Endpoint.</li>
<li>Implemented OAuth client.</li>
<li>Created sample application.<br></li>
</ul>
<a href='#todo' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='todo'>TODO</h2>

<ul>
<li>Build out models/presenters for other endpoints.</li>
<li>Improve sample app to show an example of connecting to all of the endpoints.</li>
<li>Documentation.</li>
<li>Test Coverage.</li>
<li>Cocoapods/Carthage/Swift Package Manager Connections.</li>
<li>Continuous integration.</li>
<li>Code coverage.</li>
<li>Build tvOS target and example project.</li>
<li>Build macOS target and example project.</li>
<li>Add Lense&rsquo;s for Models</li>
</ul>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<ul>
<li>Swift 3.0+</li>
<li>iOS 10.0 +</li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>
<a href='#a-href-http-cocoapods-org-cocoapods-a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a-href-http-cocoapods-org-cocoapods-a'><a href="http://cocoapods.org">CocoaPods</a></h4>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s2">"TwitchAPIWrapper"</span>
</code></pre>
<a href='#a-href-https-github-com-carthage-carthage-carthage-a' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='a-href-https-github-com-carthage-carthage-carthage-a'><a href="https://github.com/Carthage/Carthage">Carthage</a></h4>
<pre class="highlight plaintext"><code>github epv44/TwitchAPIWrapper
</code></pre>
<a href='#documentation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='documentation'>Documentation</h2>

<p>Read the [docs][docsLink]. Generated with <a href="https://github.com/realm/jazzy">jazzy</a></p>

<p>[docsLink]:</p>
<a href='#getting-started' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='getting-started'>Getting Started</h2>
<pre class="highlight plaintext"><code>import TwitchAPIWrapper
</code></pre>
<a href='#design' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='design'>Design</h3>

<p>This library has two main sections</p>

<ol>
<li>Authorization - Utilizing the Twitch OAuth protocol inside of your application.</li>
<li>Presenter Objects - Present the provided Model Objects that correspond to Twitch API endpoints.</li>
</ol>
<a href='#example' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='example'>Example</h3>

<p>The following example illustrates how to setup the OAuth components and utilize the Presenter Object (DataSources) to retrieve models.</p>
<a href='#twitch-oauth' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='twitch-oauth'>Twitch OAuth</h4>

<p>Important: Prior to authorization ensure:</p>

<ol>
<li>Add a URL Type and specify the matching URL Scheme for Twitch.</li>
<li>Set the proper clientID, redirectURI, scopes, and clientSecret as they are necessary for successful authentication.</li>
<li>It is recommended not to leave any of the above in version control, as you can see from the sample application.</li>
</ol>
<pre class="highlight plaintext"><code>// OAuth setup can be placed wherever you wish; however, as in the example project it is placed inside of the AppDelegate so
// that authorization is done when the application is first loaded.
TwitchAuthorizationManager.sharedInstance.clientID = configuration["clientID"] as? String
TwitchAuthorizationManager.sharedInstance.redirectURI = configuration["redirectURI"] as? String
TwitchAuthorizationManager.sharedInstance.scopes = configuration["scopes"] as? String
TwitchAuthorizationManager.sharedInstance.clientSecret = configuration["clientSecret"] as? String
if !TwitchAuthorizationManager.sharedInstance.hasOAuthToken() {
    do {
        try TwitchAuthorizationManager.sharedInstance.login()
    } catch AuthorizationError.invalidURLResponse(let url) {
        NSLog("error thrown: \(url)")
    } catch AuthorizationError.unableToParseJSON(let json) {
        NSLog(json)
    } catch AuthorizationError.invalidQueryParameters(let d) {
        NSLog(d)
    } catch AuthorizationError.invalidAuthURL(let d, let url) {
        NSLog("\(d), url: \(url)")
    } catch AuthorizationError.unknownError(let e) {
        NSLog(e.localizedDescription)
    } catch {
        NSLog("unknown exception occured")
    }
} else {
    NSLog("OAuth Token exists, no need to authorize")
}

//Add the following function to the AppDelegate:
func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -&gt; Bool {
    if url.host == yourURLScheme {
        TwitchAuthorizationManager.sharedInstance.processOauthResponse(with: url,
            completion: { (result) in
                switch result {
                case let .failure(error):
                    switch error {
                    case let AuthorizationError.invalidAuthURL(desc, url):
                        NSLog(desc + url)
                    case let AuthorizationError.invalidQueryParameters(desc):
                        NSLog(desc)
                    case let AuthorizationError.invalidURLResponse(url):
                        NSLog("\(url)")
                    case let AuthorizationError.noCode(desc):
                        NSLog(desc)
                    case let AuthorizationError.unableToParseJSON(json):
                        NSLog(json)
                    case let AuthorizationError.unknownError(error):
                        NSLog(error.localizedDescription)
                    case ParsingError.cannotParseJSONArray:
                        NSLog("Error parsing JSON Array")
                    case ParsingError.invalidJSONData:
                        NSLog("Invalid JSON Data")
                    case ParsingError.cannotParseJSONDictionary:
                        NSLog("Error parsing JSON Dictionary")
                    case ParsingError.unsupportedType:
                        NSLog("Type you are trying to parse is currently unsupported")
                    case let NetworkJSONServiceError.networkError(error):
                        NSLog(error.localizedDescription)
                    case NetworkJSONServiceError.noData:
                        NSLog("No data returned")
                    default:
                        NSLog("Unknown error occurred")
                    }
                    //case let .success(credentials)
                case .success(_):
                    //returns credential object; however, values are stored securely in the Keychain and can be accessed as:
                    print(TwitchAuthorizationManager.sharedInstance.authToken)
                }
            }
        )
    }
    return true
}
</code></pre>

<p>The <code>TwitchAuthorizationManager</code> is a singleton, utilize the shared instance to access the following properties returned from authentication with Twitch:</p>

<ol>
<li>Refresh Token: <code>TwitchAuthorizationManager.sharedInstance.refreshToken</code></li>
<li>Authentication Token: <code>TwitchAuthorizationManager.sharedInstance.authToken</code></li>
<li>Scopes: <code>TwitchAuthorizationManager.sharedInstance.scopes</code></li>
</ol>
<a href='#access-models' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='access-models'>Access Models</h4>
<pre class="highlight plaintext"><code>//Set the presenter object for the Model you want to display
fileprivate lazy var userPresenter: UserPresenter = {
    return UserPresenter(dataSource: self)
}()

//Call the presenter's get method, in this case the user parameter is the name of the user you wish to retrieve
userPresenter.get(user: "test_user1")

//Extend the TwitchAPIDataSource
extension UserViewController: TwitchAPIDataSource {
    public func set&lt;T&gt;(resource: T) {
        if let user = resource as? User {
            print(user.displayName)
        } else {
            NSLog("Invalid Generic Resource")
        }
    }

    func startLoading(for resource: TwitchResource) {
        NSLog("Started Loading: \(resource)")
    }

    func finishLoading(for resource: TwitchResource) {
        NSLog("Finished Loading: \(resource)")
    }

    func handle(error: Error) {
        NSLog("Error")
    }
}
</code></pre>
<a href='#example-project' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='example-project'>Example Project</h3>

<p>The included example project includes a more detailed implementation of all usable Models and a full OAuth setup.</p>
<a href='#currently-supported-models' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='currently-supported-models'>Currently Supported Models</h2>
<a href='#user-code-userpresenter-code' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='user-code-userpresenter-code'>User <code>UserPresenter</code></h3>

<p>Endpoints:</p>

<ol>
<li>GET /users/:user</li>
<li>GET /user (requires Authorization)</li>
</ol>
<a href='#emot-code-emotepresenter-code' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='emot-code-emotepresenter-code'>Emot <code>EmotePresenter</code></h3>

<p>Endpoint:</p>

<ol>
<li>GET /users/:user/emotes (requires Authorization)</li>
</ol>
<a href='#unit-tests' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='unit-tests'>Unit Tests</h2>

<p>There are unit tests included with this project which may also be helpful to review when trying to better understand the library.</p>
<a href='#contribute' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='contribute'>Contribute</h2>

<p>Please feel free to contribute as long as you follow the coding format of the rest of the project.</p>
<a href='#author' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='author'>Author</h2>

<p>Eric Vennaro, <a href="mailto:epv9@case.edu">epv9@case.edu</a></p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>EVSlidingTableViewCell is available under the <a href="http://opensource.org/licenses/MIT">MIT License</a>. See the LICENSE file for more info.</p>

<blockquote>
<p><strong>Copyright &copy; 2016-present Eric Vennaro.</strong></p>
</blockquote>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://github.com/epv44/TwitchAPIWrapper" target="_blank" rel="external">Eric Vennaro</a>. All rights reserved. (Last updated: 2016-10-21)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.7.2</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
